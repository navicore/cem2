# Test list-map: transform each element

: double ( Int -- Int )
  2 * ;

: main ( -- )
  # Create list [1, 2, 3]
  Nil
  3 swap Cons
  2 swap Cons
  1 swap Cons

  # Map double over it -> [2, 4, 6]
  [ double ] list-map

  # Verify first element is 2
  dup list-head
  2 = match
    true => [ ]
    false => [ "Expected first element to be 2" write_line 1 exit ]
  end

  # Verify second element is 4
  list-tail dup list-head
  4 = match
    true => [ ]
    false => [ "Expected second element to be 4" write_line 1 exit ]
  end

  # Verify third element is 6
  list-tail list-head
  6 = match
    true => [ ]
    false => [ "Expected third element to be 6" write_line 1 exit ]
  end ;
